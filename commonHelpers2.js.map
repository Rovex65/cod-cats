{"version":3,"file":"commonHelpers2.js","sources":["../src/img/bcg-img-shop-list.png","../src/js/shop-list.js"],"sourcesContent":["export default \"__VITE_ASSET__97b0871a__\"","import { templateShopListBooks } from './template-functions';\nimport image from '../img/bcg-img-shop-list.png';\n\nimport './header';\nimport './switch-theme';\n\nconst listElem = document.querySelector('.shopping-list');\n\nconst storedValue = localStorage.getItem('saved-books');\nif (!storedValue || JSON.parse(storedValue).length === 0) {\n  renderEmptyPage();\n} else {\n  renderCartItems();\n}\n\nlistElem.addEventListener('click', handleDeleteButtonClick);\n\nfunction handleDeleteButtonClick(event) {\n  if (\n    event.target.classList.contains('delete-icon') ||\n    event.target.classList.contains('svg-icon')\n  ) {\n    const card = event.target.closest('.shop-list-book-card');\n    if (card) {\n      card.remove();\n\n      const cart = JSON.parse(localStorage.getItem('saved-books')) || [];\n\n      const index = cart.findIndex(\n        item =>\n          item.title === card.querySelector('.shop-list-book-title').textContent\n      );\n\n      if (index !== -1) {\n        cart.splice(index, 1);\n        localStorage.setItem('saved-books', JSON.stringify(cart));\n      }\n\n      updateMargin();\n\n      if (listElem.querySelectorAll('.shop-list-book-card').length === 0) {\n        renderEmptyPage();\n      }\n    }\n  }\n}\n\nfunction updateMargin() {\n  const items = listElem.querySelectorAll('.shop-list-book-card');\n  const titleElem = document.querySelector('.title-shopping');\n\n  if (items.length === 0) {\n    titleElem.classList.add('empty-cart');\n    titleElem.classList.remove('not-empty-cart');\n  } else {\n    titleElem.classList.remove('empty-cart');\n    titleElem.classList.add('not-empty-cart');\n  }\n}\n\nfunction renderCartItems() {\n  const cartItems = JSON.parse(localStorage.getItem('saved-books')) || [];\n  const renderedHTML = templateShopListBooks(cartItems);\n  listElem.insertAdjacentHTML('beforeend', renderedHTML);\n  updateMargin();\n}\n\nfunction renderEmptyPage() {\n  const emptyMarkup = `\n    <p class=\"text-shopping\">\n    This page is empty, add some books and proceed to order.\n    </p>\n    <img src=${image} alt=\"\" class=\"img-shopping\" />\n  `;\n  listElem.insertAdjacentHTML('beforeend', emptyMarkup);\n}\n"],"names":["image","listElem","storedValue","renderEmptyPage","renderCartItems","handleDeleteButtonClick","event","card","cart","index","item","updateMargin","items","titleElem","cartItems","renderedHTML","templateShopListBooks","emptyMarkup"],"mappings":"sDAAA,MAAeA,EAAA,kDCMTC,EAAW,SAAS,cAAc,gBAAgB,EAElDC,EAAc,aAAa,QAAQ,aAAa,EAClD,CAACA,GAAe,KAAK,MAAMA,CAAW,EAAE,SAAW,EACrDC,IAEAC,IAGFH,EAAS,iBAAiB,QAASI,CAAuB,EAE1D,SAASA,EAAwBC,EAAO,CACtC,GACEA,EAAM,OAAO,UAAU,SAAS,aAAa,GAC7CA,EAAM,OAAO,UAAU,SAAS,UAAU,EAC1C,CACA,MAAMC,EAAOD,EAAM,OAAO,QAAQ,sBAAsB,EACxD,GAAIC,EAAM,CACRA,EAAK,OAAM,EAEX,MAAMC,EAAO,KAAK,MAAM,aAAa,QAAQ,aAAa,CAAC,GAAK,GAE1DC,EAAQD,EAAK,UACjBE,GACEA,EAAK,QAAUH,EAAK,cAAc,uBAAuB,EAAE,WACrE,EAEUE,IAAU,KACZD,EAAK,OAAOC,EAAO,CAAC,EACpB,aAAa,QAAQ,cAAe,KAAK,UAAUD,CAAI,CAAC,GAG1DG,IAEIV,EAAS,iBAAiB,sBAAsB,EAAE,SAAW,GAC/DE,GAEH,CACF,CACH,CAEA,SAASQ,GAAe,CACtB,MAAMC,EAAQX,EAAS,iBAAiB,sBAAsB,EACxDY,EAAY,SAAS,cAAc,iBAAiB,EAEtDD,EAAM,SAAW,GACnBC,EAAU,UAAU,IAAI,YAAY,EACpCA,EAAU,UAAU,OAAO,gBAAgB,IAE3CA,EAAU,UAAU,OAAO,YAAY,EACvCA,EAAU,UAAU,IAAI,gBAAgB,EAE5C,CAEA,SAAST,GAAkB,CACzB,MAAMU,EAAY,KAAK,MAAM,aAAa,QAAQ,aAAa,CAAC,GAAK,GAC/DC,EAAeC,EAAsBF,CAAS,EACpDb,EAAS,mBAAmB,YAAac,CAAY,EACrDJ,GACF,CAEA,SAASR,GAAkB,CACzB,MAAMc,EAAc;AAAA;AAAA;AAAA;AAAA,eAIPjB,CAAK;AAAA,IAElBC,EAAS,mBAAmB,YAAagB,CAAW,CACtD"}