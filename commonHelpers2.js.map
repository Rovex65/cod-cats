{"version":3,"file":"commonHelpers2.js","sources":["../src/img/bcg-img-shop-list.png","../src/js/shop-list.js"],"sourcesContent":["export default \"__VITE_ASSET__97b0871a__\"","import { templateShopListBooks } from './template-functions';\nimport image from '../img/bcg-img-shop-list.png';\nimport 'tui-pagination/dist/tui-pagination.css';\nimport Pagination from 'tui-pagination';\nimport './header';\nimport './support-ukraine';\nimport './switch-theme';\n\nconst listElem = document.querySelector('.shopping-list');\nconst paginationContainer = document.querySelector('.pagination-container');\nconst itemsPerPage = 3;\nlet currentPage = 1;\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  initShoppingList();\n  initPagination();\n  updateShoppingList(currentPage);\n});\n\nlistElem.addEventListener('click', handleDeleteButtonClick);\n\nfunction handleDeleteButtonClick(event) {\n  if (\n    event.target.classList.contains(\"delete-icon\") ||\n    event.target.classList.contains(\"svg-icon\") ||\n    event.target.closest(\".delete-icon\") ||\n    event.target.closest(\".svg-icon\")\n  ) {\n    const card = event.target.closest(\".shop-list-book-card\");\n    if (card) {\n      const cart = JSON.parse(localStorage.getItem(\"shoppingList\")) || [];\n      const index = cart.findIndex(\n        (item) =>\n          item.title ===\n          card.querySelector(\".shop-list-book-title\").textContent\n      );\n\n      if (index !== -1) {\n        cart.splice(index, 1);\n        localStorage.setItem(\"shoppingList\", JSON.stringify(cart));\n\n        const totalItems = cart.length;\n        const totalPages = Math.ceil(totalItems / itemsPerPage);\n\n        if (totalItems > 0 && currentPage > totalPages) {\n          currentPage = totalPages;\n        }\n\n        updateShoppingListAndPagination(); // Оновлюємо пагінацію та список\n\n        const listElem = document.querySelector(\".shopping-list\");\n        if (listElem.querySelectorAll(\".shop-list-book-card\").length === 0) {\n          renderEmptyPage();\n          hidePagination();\n        }\n      }\n    }\n  }\n}\n\nfunction updateShoppingListAndPagination() {\n  updateShoppingList(currentPage);\n  updatePagination();\n}\n\nfunction hidePagination() {\n  const paginationContainer = document.querySelector('.pagination-container');\n  if (paginationContainer) {\n    paginationContainer.style.display = 'none';\n  }\n}\n\nfunction updateMargin() {\n  const items = listElem.querySelectorAll('.shop-list-book-card');\n  const titleElem = document.querySelector('.title-shopping');\n\n  if (items.length === 0) {\n    titleElem.classList.add('empty-cart');\n    titleElem.classList.remove('not-empty-cart');\n  } else {\n    titleElem.classList.remove('empty-cart');\n    titleElem.classList.add('not-empty-cart');\n  }\n}\n\nfunction renderCartItems() {\n  const cartItems = JSON.parse(localStorage.getItem(\"shoppingList\")) || [];\n  const totalItems = cartItems.length;\n\n  const renderedHTML = templateShopListBooks(cartItems);\n  listElem.innerHTML = renderedHTML;\n  updateMargin();\n\n  if (totalItems > itemsPerPage) {\n    updatePagination();\n  } else {\n    hidePagination();\n  }\n}\n\nfunction renderEmptyPage() {\n  const emptyMarkup = `\n    <p class=\"text-shopping\">\n      This page is empty, add some books and proceed to order.\n    </p>\n    <img src=${image} alt=\"\" class=\"img-shopping\" />\n  `;\n  listElem.innerHTML = emptyMarkup;\n  hidePagination();\n}\n\nfunction initShoppingList() {\n  const storedValue = localStorage.getItem('shoppingList');\n  if (storedValue === null || storedValue === undefined) {\n    renderEmptyPage();\n  } else {\n    renderCartItems();\n  }\n}\n\nfunction initPagination() {\n  const cartItems = JSON.parse(localStorage.getItem('shoppingList')) || [];\n  const totalItems = cartItems.length;\n\n  const paginationOptions = {\n    totalItems: totalItems,\n    itemsPerPage: itemsPerPage,\n    visiblePages: 3,\n    centerAlign: false,\n    page: currentPage,\n    template: {\n      page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n      currentPage: '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n      moveButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-page-btn-moveButton\">' +\n        '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n        '</a>',\n      disabledMoveButton:\n        '<span class=\"tui-page-btn tui-page-btn-disabledMoveButton tui-is-disabled\">' +\n        '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n        '</span>',\n      moreButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-page-btn-moreButton tui-{{type}}-is-ellip\">' +\n        '<span class=\"tui-ico-ellip\">...</span>' +\n        '</a>',\n    },\n  };\n\n  const pagination = new Pagination(paginationContainer, paginationOptions);\n\n  pagination.on('afterMove', function (event) {\n    currentPage = event.page;\n    updateShoppingListAndPagination();\n  });\n}\n\nfunction updateShoppingList(page) {\n  const cartItems = JSON.parse(localStorage.getItem('shoppingList')) || [];\n  const startIdx = (page - 1) * itemsPerPage;\n  const endIdx = startIdx + itemsPerPage;\n  const pageItems = cartItems.slice(startIdx, endIdx);\n\n  listElem.innerHTML = '';\n\n  const renderedHTML = templateShopListBooks(pageItems);\n  listElem.innerHTML = renderedHTML;\n\n  restorePaginationButtonsClasses();\n\n  updateMargin();\n\n  if (cartItems.length === 0) {\n    renderEmptyPage();\n  }\n}\n\nfunction updatePagination() {\n  const cartItems = JSON.parse(localStorage.getItem(\"shoppingList\")) || [];\n  const totalItems = cartItems.length;\n\n  const paginationContainer = document.querySelector(\".pagination-container\");\n\n  if (totalItems > itemsPerPage) {\n    const paginationOptions = {\n      totalItems: totalItems,\n      itemsPerPage: itemsPerPage,\n      visiblePages: 3,\n      centerAlign: true,\n      page: currentPage,\n      template: {\n        page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n        currentPage:\n          '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n        moveButton:\n          '<a href=\"#\" class=\"tui-page-btn tui-page-btn-moveButton\">' +\n          '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n          \"</a>\",\n        disabledMoveButton:\n          '<span class=\"tui-page-btn tui-page-btn-disabledMoveButton tui-is-disabled\">' +\n          '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n          \"</span>\",\n        moreButton:\n          '<a href=\"#\" class=\"tui-page-btn tui-page-btn-moreButton tui-{{type}}-is-ellip\">' +\n          '<span class=\"tui-ico-ellip\">...</span>' +\n          \"</a>\",\n      },\n    };\n\n    const existingPagination = paginationContainer.querySelector(\".tui-pagination\");\n    if (existingPagination) {\n      existingPagination.remove();\n    }\n\n    const pagination = new Pagination(paginationContainer, paginationOptions);\n\n    pagination.on(\"afterMove\", function (event) {\n      currentPage = event.page;\n      updateShoppingListAndPagination();\n    });\n  } else {\n    hidePagination(); \n  }\n}\n\nfunction restorePaginationButtonsClasses() {\n  \n}\n"],"names":["image","listElem","paginationContainer","itemsPerPage","currentPage","initShoppingList","initPagination","updateShoppingList","handleDeleteButtonClick","event","card","cart","index","item","totalItems","totalPages","updateShoppingListAndPagination","renderEmptyPage","hidePagination","updatePagination","updateMargin","items","titleElem","renderCartItems","cartItems","renderedHTML","templateShopListBooks","emptyMarkup","storedValue","paginationOptions","Pagination","page","startIdx","endIdx","pageItems","existingPagination"],"mappings":"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"}