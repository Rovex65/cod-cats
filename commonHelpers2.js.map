{"version":3,"file":"commonHelpers2.js","sources":["../src/img/bcg-img-shop-list.png","../src/js/pagination.js","../src/js/shop-list.js"],"sourcesContent":["export default \"__VITE_ASSET__97b0871a__\"","import { templateShopListBooks } from './template-functions';\nimport image from '../img/bcg-img-shop-list.png';\nimport 'tui-pagination/dist/tui-pagination.css';\nimport Pagination from 'tui-pagination';\n\nconst listElem = document.querySelector(\".shopping-list\");\nconst paginationContainer = document.querySelector(\".pagination-container\");\nconst itemsPerPage = 3; \nlet currentPage = 1;\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  initShoppingList();\n  initPagination();\n  updateShoppingList(currentPage);\n});\n\nlistElem.addEventListener('click', handleDeleteButtonClick);\n\nfunction handleDeleteButtonClick(event) {\n  if (event.target.classList.contains('delete-icon') || event.target.classList.contains('svg-icon')) {\n    const card = event.target.closest('.shop-list-book-card');\n    if (card) {\n      const cart = JSON.parse(localStorage.getItem(\"shoppingList\")) || [];\n      const index = cart.findIndex(item => item.title === card.querySelector('.shop-list-book-title').textContent);\n\n      if (index !== -1) {\n        cart.splice(index, 1);\n        localStorage.setItem(\"shoppingList\", JSON.stringify(cart));\n        \n        updatePagination();\n\n        const startIdx = (currentPage - 1) * itemsPerPage;\n        const endIdx = startIdx + itemsPerPage;\n\n        if (index >= startIdx && index < endIdx) {\n          updateShoppingList(currentPage);\n        } else {\n          updateShoppingList(currentPage);\n        }\n      }\n    }\n  }\n}\n\n\n\nfunction updateMargin() {\n  const items = listElem.querySelectorAll(\".shop-list-book-card\");\n  const titleElem = document.querySelector(\".title-shopping\"); \n\n  if (items.length !== 0) {\n    titleElem.classList.add('not-empty-cart');\n  }\n}\n\nfunction renderCartItems() {\n  const cartItems = JSON.parse(localStorage.getItem(\"shoppingList\")) || [];\n  const renderedHTML = templateShopListBooks(cartItems);\n  listElem.innerHTML = renderedHTML;\n  updateMargin();\n  initPagination();\n  updatePagination();\n}\n\nfunction renderEmptyPage() {\n  const emptyMarkup = `\n    <p class=\"text-shopping\">\n      This page is empty, add some books and proceed to order.\n    </p>\n    <img src=${image} alt=\"\" class=\"img-shopping\" />\n  `;\n  listElem.innerHTML = emptyMarkup;\n}\n\nfunction initShoppingList() {\n  const storedValue = localStorage.getItem(\"shoppingList\");\n  if (storedValue === null || storedValue === undefined) {\n    renderEmptyPage();\n  } else {\n    renderCartItems();\n  }\n}\n\nfunction initPagination() {\n  const cartItems = JSON.parse(localStorage.getItem(\"shoppingList\")) || [];\n  const totalItems = cartItems.length;\n\n  const paginationOptions = {\n    totalItems: totalItems,\n    itemsPerPage: itemsPerPage,\n    visiblePages: 3,\n  page: 1,\n  centerAlign: false,\n  firstItemClassName: 'tui-first-child',\n  lastItemClassName: 'tui-last-child',\n    template: {\n     page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n        currentPage: '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n        moveButton:\n          '<a href=\"#\" class=\"tui-page-btn tui-page-btn-moveButton\">' +\n            '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n          '</a>',\n        disabledMoveButton:\n          '<span class=\"tui-page-btn tui-page-btn-disabledMoveButton tui-is-disabled\">' +\n            '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n          '</span>',\n        moreButton:\n          '<a href=\"#\" class=\"tui-page-btn tui-page-btn-moreButton tui-{{type}}-is-ellip\">' +\n            '<span class=\"tui-ico-ellip\">...</span>' +\n          '</a>'\n    }\n  };\n\n  const pagination = new Pagination(paginationContainer, paginationOptions);\n\n  pagination.on('afterMove', function (event) {\n    currentPage = event.page;\n    updateShoppingList(currentPage);\n  });\n}\n\nfunction updateShoppingList(page) {\n  const cartItems = JSON.parse(localStorage.getItem(\"shoppingList\")) || [];\n  const startIdx = (page - 1) * itemsPerPage;\n  const endIdx = startIdx + itemsPerPage;\n  const pageItems = cartItems.slice(startIdx, endIdx);\n\n  listElem.innerHTML = '';\n\n  const renderedHTML = templateShopListBooks(pageItems);\n  listElem.innerHTML = renderedHTML;\n  updateMargin();\n\n  if (cartItems.length === 0) {\n    renderEmptyPage();\n  }\n}\n\n\n\nfunction updatePagination() {\n  const cartItems = JSON.parse(localStorage.getItem(\"shoppingList\")) || [];\n  const totalItems = cartItems.length;\n\n  const paginationOptions = {\n    totalItems: totalItems,\n    itemsPerPage: itemsPerPage,\n    visiblePages: 3,\n    centerAlign: true,\n    page: currentPage,\n  };\n\n  if (cartItems.length === 0) {\n    paginationContainer.innerHTML = '';\n  } else {\n    const pagination = new Pagination(paginationContainer, paginationOptions);\n\n    pagination.on('afterMove', function (event) {\n      currentPage = event.page;\n      updateShoppingList(currentPage);\n    });\n  }\n}\n\n\n","import { templateShopListBooks } from './template-functions';\nimport image from '../img/bcg-img-shop-list.png';\nimport './pagination';\nimport './header';\nimport './switch-theme';\n\nconst listElem = document.querySelector('.shopping-list');\n\nconst storedValue = localStorage.getItem('shoppingList');\nif (!storedValue || JSON.parse(storedValue).length === 0) {\n  renderEmptyPage();\n} else {\n  renderCartItems();\n}\n\nlistElem.addEventListener('click', handleDeleteButtonClick);\n\nfunction handleDeleteButtonClick(event) {\n  if (\n    event.target.classList.contains('delete-icon') ||\n    event.target.classList.contains('svg-icon') ||\n    event.target.closest('.delete-icon') ||\n    event.target.closest('.svg-icon')\n  ) {\n    const card = event.target.closest('.shop-list-book-card');\n    if (card) {\n      card.remove();\n\n      const cart = JSON.parse(localStorage.getItem('shoppingList')) || [];\n\n      const index = cart.findIndex(\n        item =>\n          item.title === card.querySelector('.shop-list-book-title').textContent\n      );\n\n      if (index !== -1) {\n        cart.splice(index, 1);\n        localStorage.setItem('shoppingList', JSON.stringify(cart));\n      }\n\n      const startIdx = (currentPage - 1) * itemsPerPage;\n      const endIdx = startIdx + itemsPerPage;\n\n      const listElem = document.querySelector('.shopping-list');\n      if (listElem.querySelectorAll('.shop-list-book-card').length === 0) {\n        renderEmptyPage();\n      }\n    }\n  }\n}\n\nfunction updateMargin() {\n  const items = listElem.querySelectorAll('.shop-list-book-card');\n  const titleElem = document.querySelector('.title-shopping');\n\n  if (items.length === 0) {\n    titleElem.classList.add('empty-cart');\n    titleElem.classList.remove('not-empty-cart');\n  } else {\n    titleElem.classList.remove('empty-cart');\n    titleElem.classList.add('not-empty-cart');\n  }\n}\n\nfunction renderCartItems() {\n  const cartItems = JSON.parse(localStorage.getItem('shoppingList')) || [];\n  const renderedHTML = templateShopListBooks(cartItems);\n  listElem.insertAdjacentHTML('beforeend', renderedHTML);\n  updateMargin();\n}\n\nfunction renderEmptyPage() {\n  const emptyMarkup = `\n    <p class=\"text-shopping\">\n      This page is empty, add some books and proceed to order.\n    </p>\n    <img src=${image} alt=\"\" class=\"img-shopping\" />\n  `;\n  listElem.insertAdjacentHTML('beforeend', emptyMarkup);\n}\n"],"names":["image","listElem","paginationContainer","itemsPerPage","currentPage","initShoppingList","initPagination","updateShoppingList","handleDeleteButtonClick","event","card","cart","index","item","updatePagination","startIdx","endIdx","updateMargin","items","titleElem","renderCartItems","cartItems","renderedHTML","templateShopListBooks","renderEmptyPage","emptyMarkup","storedValue","paginationOptions","Pagination","page","pageItems"],"mappings":"sGAAA,MAAeA,EAAA,kDCKTC,EAAW,SAAS,cAAc,gBAAgB,EAClDC,EAAsB,SAAS,cAAc,uBAAuB,EACpEC,EAAe,EACrB,IAAIC,EAAc,EAElB,SAAS,iBAAiB,mBAAoB,UAAY,CACxDC,IACAC,IACAC,EAAmBH,CAAW,CAChC,CAAC,EAEDH,EAAS,iBAAiB,QAASO,CAAuB,EAE1D,SAASA,EAAwBC,EAAO,CACtC,GAAIA,EAAM,OAAO,UAAU,SAAS,aAAa,GAAKA,EAAM,OAAO,UAAU,SAAS,UAAU,EAAG,CACjG,MAAMC,EAAOD,EAAM,OAAO,QAAQ,sBAAsB,EACxD,GAAIC,EAAM,CACR,MAAMC,EAAO,KAAK,MAAM,aAAa,QAAQ,cAAc,CAAC,GAAK,GAC3DC,EAAQD,EAAK,UAAUE,GAAQA,EAAK,QAAUH,EAAK,cAAc,uBAAuB,EAAE,WAAW,EAE3G,GAAIE,IAAU,GAAI,CAChBD,EAAK,OAAOC,EAAO,CAAC,EACpB,aAAa,QAAQ,eAAgB,KAAK,UAAUD,CAAI,CAAC,EAEzDG,IAEA,MAAMC,GAAYX,EAAc,GAAKD,EAC/Ba,EAASD,EAAWZ,EAEtBS,GAASG,GAAYH,EAAQI,EAC/BT,EAAmBH,CAAW,CAIjC,CACF,CACF,CACH,CAIA,SAASa,GAAe,CACtB,MAAMC,EAAQjB,EAAS,iBAAiB,sBAAsB,EACxDkB,EAAY,SAAS,cAAc,iBAAiB,EAEtDD,EAAM,SAAW,GACnBC,EAAU,UAAU,IAAI,gBAAgB,CAE5C,CAEA,SAASC,GAAkB,CACzB,MAAMC,EAAY,KAAK,MAAM,aAAa,QAAQ,cAAc,CAAC,GAAK,GAChEC,EAAeC,EAAsBF,CAAS,EACpDpB,EAAS,UAAYqB,EACrBL,IACAX,IACAQ,GACF,CAEA,SAASU,GAAkB,CACzB,MAAMC,EAAc;AAAA;AAAA;AAAA;AAAA,eAIPzB,CAAK;AAAA,IAElBC,EAAS,UAAYwB,CACvB,CAEA,SAASpB,GAAmB,CAC1B,MAAMqB,EAAc,aAAa,QAAQ,cAAc,EACnDA,GAAgB,KAClBF,IAEAJ,GAEJ,CAEA,SAASd,GAAiB,CAIxB,MAAMqB,EAAoB,CACxB,YAJgB,KAAK,MAAM,aAAa,QAAQ,cAAc,CAAC,GAAK,IACzC,OAI3B,aAAcxB,EACd,aAAc,EAChB,KAAM,EACN,YAAa,GACb,mBAAoB,kBACpB,kBAAmB,iBACjB,SAAU,CACT,KAAM,gDACH,YAAa,iEACb,WACE,8GAGF,mBACE,mIAGF,WACE,2HAGL,CACL,EAEqB,IAAIyB,EAAW1B,EAAqByB,CAAiB,EAE7D,GAAG,YAAa,SAAUlB,EAAO,CAC1CL,EAAcK,EAAM,KACpBF,EAAmBH,CAAW,CAClC,CAAG,CACH,CAEA,SAASG,EAAmBsB,EAAM,CAChC,MAAMR,EAAY,KAAK,MAAM,aAAa,QAAQ,cAAc,CAAC,GAAK,GAChEN,GAAYc,EAAO,GAAK1B,EACxBa,EAASD,EAAWZ,EACpB2B,EAAYT,EAAU,MAAMN,EAAUC,CAAM,EAElDf,EAAS,UAAY,GAErB,MAAMqB,EAAeC,EAAsBO,CAAS,EACpD7B,EAAS,UAAYqB,EACrBL,IAEII,EAAU,SAAW,GACvBG,GAEJ,CAIA,SAASV,GAAmB,CAC1B,MAAMO,EAAY,KAAK,MAAM,aAAa,QAAQ,cAAc,CAAC,GAAK,GAGhEM,EAAoB,CACxB,WAHiBN,EAAU,OAI3B,aAAclB,EACd,aAAc,EACd,YAAa,GACb,KAAMC,CACV,EAEMiB,EAAU,SAAW,EACvBnB,EAAoB,UAAY,GAEb,IAAI0B,EAAW1B,EAAqByB,CAAiB,EAE7D,GAAG,YAAa,SAAUlB,EAAO,CAC1CL,EAAcK,EAAM,KACpBF,EAAmBH,CAAW,CACpC,CAAK,CAEL,CC5JA,MAAMH,EAAW,SAAS,cAAc,gBAAgB,EAElDyB,EAAc,aAAa,QAAQ,cAAc,EACnD,CAACA,GAAe,KAAK,MAAMA,CAAW,EAAE,SAAW,EACrDF,IAEAJ,IAGFnB,EAAS,iBAAiB,QAASO,CAAuB,EAE1D,SAASA,EAAwBC,EAAO,CACtC,GACEA,EAAM,OAAO,UAAU,SAAS,aAAa,GAC7CA,EAAM,OAAO,UAAU,SAAS,UAAU,GAC1CA,EAAM,OAAO,QAAQ,cAAc,GACnCA,EAAM,OAAO,QAAQ,WAAW,EAChC,CACA,MAAMC,EAAOD,EAAM,OAAO,QAAQ,sBAAsB,EACxD,GAAIC,EAAM,CACRA,EAAK,OAAM,EAEX,MAAMC,EAAO,KAAK,MAAM,aAAa,QAAQ,cAAc,CAAC,GAAK,GAE3DC,EAAQD,EAAK,UACjBE,GACEA,EAAK,QAAUH,EAAK,cAAc,uBAAuB,EAAE,WACrE,EAEUE,IAAU,KACZD,EAAK,OAAOC,EAAO,CAAC,EACpB,aAAa,QAAQ,eAAgB,KAAK,UAAUD,CAAI,CAAC,IAGzC,YAAc,GAAK,aACX,aAET,SAAS,cAAc,gBAAgB,EAC3C,iBAAiB,sBAAsB,EAAE,SAAW,GAC/Da,GAEH,CACF,CACH,CAEA,SAASP,GAAe,CACtB,MAAMC,EAAQjB,EAAS,iBAAiB,sBAAsB,EACxDkB,EAAY,SAAS,cAAc,iBAAiB,EAEtDD,EAAM,SAAW,GACnBC,EAAU,UAAU,IAAI,YAAY,EACpCA,EAAU,UAAU,OAAO,gBAAgB,IAE3CA,EAAU,UAAU,OAAO,YAAY,EACvCA,EAAU,UAAU,IAAI,gBAAgB,EAE5C,CAEA,SAASC,GAAkB,CACzB,MAAMC,EAAY,KAAK,MAAM,aAAa,QAAQ,cAAc,CAAC,GAAK,GAChEC,EAAeC,EAAsBF,CAAS,EACpDpB,EAAS,mBAAmB,YAAaqB,CAAY,EACrDL,GACF,CAEA,SAASO,GAAkB,CACzB,MAAMC,EAAc;AAAA;AAAA;AAAA;AAAA,eAIPzB,CAAK;AAAA,IAElBC,EAAS,mBAAmB,YAAawB,CAAW,CACtD"}