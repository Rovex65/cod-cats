import{t as f,a as L,b as k}from"./assets/switch-theme-465fec91.js";import{b as B,a}from"./assets/vendor-65593ac5.js";function w(e,t){const o=e.target,s=u();if(o.classList.toggle("added"),o.classList.contains("added")){v(o,s,t);return}C(o,s)}function u(){return JSON.parse(localStorage.getItem("shoppingList"))||[]}function v(e,t,o){const s=S(o);t.push(s),m(t),e.textContent="Remove from the shopping list"}function S(e){const{_id:t,list_name:o,author:s,book_image:i,buy_links:n,description:h,title:b}=e;return{bookId:t,image:i,title:b,category:o,description:h,author:s,buyLinks:n}}function m(e){localStorage.setItem("shoppingList",JSON.stringify(e))}function C(e,t){const o=t.filter(({bookId:s})=>s!==e.dataset.id);m(o),e.textContent="Add to shopping list"}const g=document.querySelector("body");function T(e,t,o){const s=B.create(f(e,t,o),{onShow:n=>{g.classList.add("modal-is-open"),document.addEventListener("keydown",i),n.element().querySelector(".modal-btn").onclick=n.close},onClose:n=>{g.classList.remove("modal-is-open"),document.removeEventListener("keydown",i)}});s.show();function i(n){n.key==="Escape"&&s.close()}}class p{constructor(){this.BASE_URL="https://books-backend.p.goit.global/books/",a.defaults.baseURL=this.BASE_URL}async getCategoryList(){return(await a.get("category-list")).data}async getTopBooks(){return(await a.get("top-books")).data}async getBooksByCategory(t){const o=new URLSearchParams({category:t});return(await a.get("category",{params:o})).data}async getBookById(t){return(await a.get(`${t}`)).data}}const c=new p,l=document.querySelector(".books-wrapper");function y(e){const t=L(e);l.insertAdjacentHTML("beforeend",t)}async function E(){try{const e=await c.getTopBooks();y(e)}catch(e){console.log(e)}}E();let r;function A(e){const t=document.querySelectorAll(".sidebar-categories-name a"),o=e==="all-categories"?"all-categories":e;for(let s=0;s<t.length;s++)t[s].classList.remove("active");document.querySelector(`[data-category="${o}"]`).classList.add("active")}function I(e){const t=k(e,r);l.innerHTML=t}async function M(e){try{if(r=e.dataset.category,A(r),r==="all-categories"){l.innerHTML="";const t=await c.getTopBooks();y(t)}else{const t=await c.getBooksByCategory(r);I(t)}}catch(t){console.log(t)}}function q(e){return u().find(({bookId:o})=>o===e)||!1}function _(e){return q(e)?{btnText:"Remove from the shopping list",btnClass:"modal-add-btn added"}:{btnText:"Add to shopping list",btnClass:"modal-add-btn"}}let d;async function x(e){try{const t=e.closest(".book-item").dataset.bookId;d=await c.getBookById(t);const o=_(t);T(d,t,o)}catch(t){console.log(t)}}document.addEventListener("click",e=>{const t=e.target;t.hasAttribute("data-category")&&(e.preventDefault(),M(t)),t.closest(".book-item")&&x(t),t.classList.contains("modal-add-btn")&&w(e,d)});const H=new p,R=document.querySelector(".sidebar-categories-name");document.querySelector(".scrolling-line");async function j(){try{const e=await H.getCategoryList();R.insertAdjacentHTML("beforeend",e.map(t=>D(t)).join(""))}catch(e){console.error("Error fetching category list:",e.message)}}function D({list_name:e}){return`<li class="sb-category-item">
            <a href="#" data-category="${e}">${e}</a>
          </li>`}j();function O(){const e=document.getElementById("burgerToggle"),t=document.getElementById("burgerMenu"),o=document.querySelector("header");e.addEventListener("click",function(){t.classList.toggle("burger-menu-show"),t.classList.contains("burger-menu-show")?(e.innerHTML=`
        <svg width="18" height="18" stroke="#000">
          <use href="../img/icons.svg#icon-close"></use>
        </svg>`,o.classList.add("overflow-hidden"),document.body.classList.add("burger-menu-show")):(e.innerHTML=`
        <svg width="28" height="28">
          <use href="../img/icons.svg#icon-menu"></use>
        </svg>`,o.classList.remove("overflow-hidden"),document.body.classList.remove("burger-menu-show"))})}document.addEventListener("DOMContentLoaded",function(){O()});const U=document.getElementById("home");document.getElementById("shopping-list");U.classList.add("active");
//# sourceMappingURL=commonHelpers.js.map
