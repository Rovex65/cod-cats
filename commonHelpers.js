import{t as y,a as p,b as u}from"./assets/switch-theme-1e5f1cfd.js";import{b as m,a as s}from"./assets/vendor-2e8888ea.js";function k(o,t){const e=m.create(y(o,t),{onShow:i=>{document.addEventListener("keydown",a)},onclose:i=>{document.removeEventListener("keydown",a)}});e.show();function a(i){i.key==="Escape"&&e.close()}}class d{constructor(){this.BASE_URL="https://books-backend.p.goit.global/books/",s.defaults.baseURL=this.BASE_URL}async getCategoryList(){return(await s.get("category-list")).data}async getTopBooks(){return(await s.get("top-books")).data}async getBooksByCategory(t){const e=new URLSearchParams({category:t});return(await s.get("category",{params:e})).data}async getBookById(t){return(await s.get(`${t}`)).data}}const n=new d,c=document.querySelector(".books-wrapper"),b=document.querySelector(".main-page");document.querySelector(".pop-up .modal-wrap");const B=document.querySelector(".pop-up .modal-add-btn");function g(o){const t=p(o);c.insertAdjacentHTML("beforeend",t)}async function f(){try{const o=await n.getTopBooks();g(o)}catch(o){console.log(o)}}f();let r;function L(o){const t=document.querySelectorAll(".sidebar-categories-name a"),e=o==="all-categories"?"all-categories":o;for(let a=0;a<t.length;a++)t[a].classList.remove("active");document.querySelector(`[data-category="${e}"]`).classList.add("active")}function w(o){const t=u(o,r);c.innerHTML=t}async function h(o){try{if(r=o.dataset.category,L(r),r==="all-categories"){c.innerHTML="";const t=await n.getTopBooks();g(t)}else{const t=await n.getBooksByCategory(r);w(t)}}catch(t){console.log(t)}}let l;async function S(o){try{const t=o.closest(".book-item").dataset.bookId;l=await n.getBookById(t),k(l,t)}catch(t){console.log(t)}}b.addEventListener("click",o=>{const t=o.target;t.hasAttribute("data-category")&&(o.preventDefault(),h(t))});B.addEventListener("click",o=>{updateShoppingList(o,l)});c.addEventListener("click",o=>{const t=o.target;t.closest(".book-item")&&S(t)});const A=new d;async function v(o){const t=await A.getBooksByCategory(o);localStorage.setItem("saved-books",JSON.stringify(t))}v("Audio Fiction");const C=new d,T=document.querySelector(".sidebar-categories-name");document.querySelector(".scrolling-line");async function E(){try{const o=await C.getCategoryList();T.insertAdjacentHTML("beforeend",o.map(t=>q(t)).join(""))}catch(o){console.error("Error fetching category list:",o.message)}}function q({list_name:o}){return`<li class="sb-category-item">
            <a href="#" data-category="${o}">${o}</a>
          </li>`}E();
//# sourceMappingURL=commonHelpers.js.map
