import{t as y,a as p,b as u}from"./assets/switch-theme-bfb7926c.js";import{b as m,a as r}from"./assets/vendor-65593ac5.js";function k(e,t){const o=m.create(y(e,t),{onShow:s=>{document.addEventListener("keydown",a),s.element().querySelector(".modal-btn").onclick=s.close},onclose:s=>{document.removeEventListener("keydown",a)}});o.show();function a(s){s.key==="Escape"&&o.close()}}class d{constructor(){this.BASE_URL="https://books-backend.p.goit.global/books/",r.defaults.baseURL=this.BASE_URL}async getCategoryList(){return(await r.get("category-list")).data}async getTopBooks(){return(await r.get("top-books")).data}async getBooksByCategory(t){const o=new URLSearchParams({category:t});return(await r.get("category",{params:o})).data}async getBookById(t){return(await r.get(`${t}`)).data}}const c=new d,i=document.querySelector(".books-wrapper"),b=document.querySelector(".main-page");document.querySelector(".pop-up .modal-wrap");const B=document.querySelector(".pop-up .modal-add-btn");function g(e){const t=p(e);i.insertAdjacentHTML("beforeend",t)}async function f(){try{const e=await c.getTopBooks();g(e)}catch(e){console.log(e)}}f();let n;function L(e){const t=document.querySelectorAll(".sidebar-categories-name a"),o=e==="all-categories"?"all-categories":e;for(let a=0;a<t.length;a++)t[a].classList.remove("active");document.querySelector(`[data-category="${o}"]`).classList.add("active")}function w(e){const t=u(e,n);i.innerHTML=t}async function h(e){try{if(n=e.dataset.category,L(n),n==="all-categories"){i.innerHTML="";const t=await c.getTopBooks();g(t)}else{const t=await c.getBooksByCategory(n);w(t)}}catch(t){console.log(t)}}let l;async function S(e){try{const t=e.closest(".book-item").dataset.bookId;l=await c.getBookById(t),k(l,t)}catch(t){console.log(t)}}b.addEventListener("click",e=>{const t=e.target;t.hasAttribute("data-category")&&(e.preventDefault(),h(t))});B.addEventListener("click",e=>{updateShoppingList(e,l)});i.addEventListener("click",e=>{const t=e.target;t.closest(".book-item")&&S(t)});const A=new d;async function v(e){const t=await A.getBooksByCategory(e);localStorage.setItem("saved-books",JSON.stringify(t))}v("Audio Fiction");const C=new d,T=document.querySelector(".sidebar-categories-name");document.querySelector(".scrolling-line");async function E(){try{const e=await C.getCategoryList();T.insertAdjacentHTML("beforeend",e.map(t=>q(t)).join(""))}catch(e){console.error("Error fetching category list:",e.message)}}function q({list_name:e}){return`<li class="sb-category-item">
            <a href="#" data-category="${e}">${e}</a>
          </li>`}E();
//# sourceMappingURL=commonHelpers.js.map
