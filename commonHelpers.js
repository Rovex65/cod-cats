import{t as b,a as w,b as L}from"./assets/switch-theme-0f27450b.js";import{b as x,a as r}from"./assets/vendor-65593ac5.js";function S(t,e){const o=t.target,n=y();if(o.classList.toggle("added"),o.classList.contains("added")){$(o,n,e);return}B(o,n)}function y(){return JSON.parse(localStorage.getItem("shoppingList"))||[]}function $(t,e,o){const n=v(o);e.push(n),h(e),t.textContent="Remove from the shopping list"}function v(t){const{_id:e,list_name:o,author:n,book_image:i,buy_links:s,description:u,title:a}=t;return{bookId:e,image:i,title:a,category:o,description:u,author:n,buyLinks:s}}function h(t){localStorage.setItem("shoppingList",JSON.stringify(t))}function B(t,e){const o=e.filter(({bookId:n})=>n!==t.dataset.id);h(o),t.textContent="Add to shopping list"}const d=document.querySelector("body");function C(t,e,o){const n=x.create(b(t,e,o),{onShow:s=>{d.classList.add("modal-is-open"),document.addEventListener("keydown",i),s.element().querySelector(".modal-btn").onclick=s.close},onClose:s=>{d.classList.remove("modal-is-open"),document.removeEventListener("keydown",i)}});n.show();function i(s){s.key==="Escape"&&n.close()}}class k{constructor(){this.BASE_URL="https://books-backend.p.goit.global/books/",r.defaults.baseURL=this.BASE_URL}async getCategoryList(){return(await r.get("category-list")).data}async getTopBooks(){return(await r.get("top-books")).data}async getBooksByCategory(e){const o=new URLSearchParams({category:e});return(await r.get("category",{params:o})).data}async getBookById(e){return(await r.get(`${e}`)).data}}const l=new k,m=document.querySelector(".books-wrapper");function f(t){const e=w(t);m.insertAdjacentHTML("beforeend",e)}async function A(){try{const t=await l.getTopBooks();f(t)}catch(t){console.log(t)}}A();let c;function T(t){const e=document.querySelectorAll(".sidebar-categories-name a"),o=t==="all-categories"?"all-categories":t;for(let n=0;n<e.length;n++)e[n].classList.remove("active");document.querySelector(`[data-category="${o}"]`).classList.add("active")}function E(t){const e=L(t,c);m.innerHTML=e}async function M(t){try{if(c=t.dataset.category,T(c),c==="all-categories"){m.innerHTML="";const e=await l.getTopBooks();f(e)}else{const e=await l.getBooksByCategory(c);E(e)}}catch(e){console.log(e)}}function q(t){return y().find(({bookId:o})=>o===t)||!1}function I(t){return q(t)?{btnText:"Remove from the shopping list",btnClass:"modal-add-btn added"}:{btnText:"Add to shopping list",btnClass:"modal-add-btn"}}let p;async function _(t){try{const e=t.closest(".book-item").dataset.bookId;p=await l.getBookById(e);const o=I(e);C(p,e,o)}catch(e){console.log(e)}}document.addEventListener("click",t=>{const e=t.target;e.hasAttribute("data-category")&&(t.preventDefault(),M(e)),e.closest(".book-item")&&_(e),e.classList.contains("modal-add-btn")&&S(t,p)});const j="../img/save.png",H="../img/save@2x.png",R="../img/hope.png",U="../img/hope@2x.png",F="../img/24u.png",O="../img/24u2x.png",z="../img/medical.png",D="../img/medical@2x.png",P="../img/sans.png",N="../img/sans@2x.png",J="../img/razom.png",W="../img/razom@2x.png",Z="../img/hunger.png",G="../img/hunger@2x.png",K="../img/vision.png",Q="../img/vision@2x.png",V="../img/prytula.png",X="../img/prytula@2x.png.",Y=[{title:"Save the Children",url:"https://www.savethechildren.net/what-we-do/emergencies/ukraine-crisis",img:`${j}`,img2x:`${H}`},{title:"Project HOPE",url:"https://www.projecthope.org/country/ukraine/",img:`${R}`,img2x:`${U}`},{title:"UNITED24",url:"https://u24.gov.ua/uk",img:`${F}`,img2x:`${O}`},{title:"International Medical Corps",url:"https://internationalmedicalcorps.org/country/ukraine/",img:`${z}`,img2x:`${D}`},{title:"Medicins Sans Frontieres",url:"https://www.msf.org/ukraine",img:`${P}`,img2x:`${N}`},{title:"RAZOM",url:"https://www.razomforukraine.org/",img:`${J}`,img2x:`${W}`},{title:"Action against hunger",url:"https://www.actionagainsthunger.org/location/europe/ukraine/",img:`${Z}`,img2x:`${G}`},{title:"World vision",url:"https://www.wvi.org/emergencies/ukraine",img:`${K}`,img2x:`${Q}`},{title:"Serhiy Prytula Charity Foundation",url:"https://prytulafoundation.org/en",img:`${V}`,img2x:`${X}`}];let g=0;const tt=document.querySelector(".support-ukraine-list"),et=document.querySelector(".slider-liner-su"),ot=document.querySelector(".support-ukraine-btn");ot.addEventListener("click",at);nt(Y);function nt(t){t.forEach(function(e,o){const{title:n,url:i,img:s,img2x:u}=e,a={};a.title=n,a.url=i,a.img=s,a.img2x=u,a.index=o,tt.insertAdjacentHTML("beforeend",st(a))})}function st(t){const{title:e,url:o,img:n,img2x:i,index:s}=t;return`<li class="list-unit">
	<a href="${o}" class="list-unit-link" target="_blank"><span class="span-list-unit">${it(s+1)}</span>
	<img class="img-list-unit"
		src="${n}"
		srcset="${n} 1x, ${i} 2x"
		alt="${e}"
	></img></a>
</li>`}function it(t){return String(t).padStart(2,"0")}function at(){g+=157,g>500&&(g=0),et.style.top=-g+"px"}const rt=new k,ct=document.querySelector(".sidebar-categories-name");document.querySelector(".scrolling-line");async function gt(){try{const t=await rt.getCategoryList();ct.insertAdjacentHTML("beforeend",t.map(e=>lt(e)).join(""))}catch(t){console.error("Error fetching category list:",t.message)}}function lt({list_name:t}){return`<li class="sb-category-item">
            <a href="#" data-category="${t}">${t}</a>
          </li>`}gt();
//# sourceMappingURL=commonHelpers.js.map
